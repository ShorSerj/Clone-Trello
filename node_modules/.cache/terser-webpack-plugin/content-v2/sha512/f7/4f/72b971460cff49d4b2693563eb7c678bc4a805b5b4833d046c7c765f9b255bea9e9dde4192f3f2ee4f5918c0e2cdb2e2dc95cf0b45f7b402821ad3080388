{"code":"!function(e){function t(t){for(var r,i,l=t[0],s=t[1],d=t[2],c=0,g=[];c<l.length;c++)i=l[c],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);g.length;)g.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={1:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=s;o.push([122,3]),n()}({122:function(e,t,n){n(123),e.exports=n(314)},309:function(e,t,n){},310:function(e,t,n){},311:function(e,t,n){},312:function(e,t,n){},314:function(e,t,n){\"use strict\";n.r(t);n(309),n(310),n(311),n(312);var r=function(e,t,n){var r=new XMLHttpRequest;r.open(n,e),r.responseType=\"json\",r.setRequestHeader(\"Content-Type\",\"application/json\"),r.send(JSON.stringify(t)),r.onload=function(){200!=r.status||(s.value=r.response)},r.onprogress=function(e){e.lengthComputable},r.onerror=function(){}};function a(e){return(a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var o={idCounter:10,darggbleTask:null,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=e;e||(n=o.idCounter);var r=document.createElement(\"div\");r.classList.add(\"task\"),r.setAttribute(\"data-task-id\",n),r.setAttribute(\"draggable\",\"true\");var a=document.createElement(\"div\");a.classList.add(\"task-text\",\"edit\"),a.innerHTML=t,a.setAttribute(\"contenteditable\",!0),a.focus(),a.addEventListener(\"blur\",(function(){a.innerHTML.length<1&&a.closest(\".task\")&&a.closest(\".task\").remove(),a.removeAttribute(\"contenteditable\")}));var i=document.createElement(\"div\");return r.append(a),r.append(i),e||o.idCounter++,o.addDragnDropEvent(r),o.editValue(a),r},findIdTask:function(){var e=document.querySelectorAll(\".task\");console.log(e);var t=1;e.forEach((function(e){var n=e.getAttribute(\"data-task-id\");n>t?(console.log(n),console.log(t),t=n,console.log(t)):console.log(a(n))})),console.log(t)},editValue:function(e){var t;e.addEventListener(\"dblclick\",(function(){e.setAttribute(\"contenteditable\",!0),e.focus(),t=e.innerHTML})),e.addEventListener(\"blur\",(function(){e.innerHTML.length<1&&e.closest(\".task\")&&e.closest(\".task\").remove(),e.removeAttribute(\"contenteditable\"),t!==e.innerHTML&&o.saveTask(e)}))},saveTask:function(e){var t={idParent:e.closest(\".column\").getAttribute(\"data-column-id\"),text:e.innerHTML},n=e.parentElement.getAttribute(\"data-task-id\");n&&(t.id=n),r(\"http://localhost:8000/fixTitleTask\",t,\"POST\")},addDragnDropEvent:function(e){e.setAttribute(\"draggable\",!0),e.addEventListener(\"dragstart\",o.evenDragStartTask),e.addEventListener(\"dragend\",o.evenDragEndTask),e.addEventListener(\"dragenter\",o.evenDragEnterTask),e.addEventListener(\"dragover\",o.evenDragOverTask),e.addEventListener(\"dragleave\",o.evenDragLeaveTask),e.addEventListener(\"drop\",o.evenDragDropTask)},evenDragStartTask:function(e){e.stopPropagation(),this.classList.add(\"dragElement\"),o.darggbleTask=this},evenDragEndTask:function(e){e.stopPropagation(),this.classList.remove(\"dragElement\"),o.darggbleTask=null},evenDragEnterTask:function(e){e.stopPropagation()},evenDragOverTask:function(e){e.preventDefault(),e.stopPropagation()},evenDragLeaveTask:function(e){e.stopPropagation()},evenDragDropTask:function(e){if(e.preventDefault(),e.stopPropagation(),o.darggbleTask!==this)if(this.parentElement===o.darggbleTask.parentElement){var t=Array.from(this.parentElement.querySelectorAll(\".task\"));t.indexOf(this)<t.indexOf(o.darggbleTask)?this.parentElement.insertBefore(o.darggbleTask,this):this.parentElement.insertBefore(o.darggbleTask,this.nextElementSibling)}else this.parentElement.insertBefore(o.darggbleTask,this)}},i={idCounter:4,darggbleColumn:null,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"Done\",n=e;e||(n=i.idCounter);var r=document.createElement(\"div\");r.classList.add(\"column\"),r.setAttribute(\"data-column-id\",n),r.setAttribute(\"draggable\",!0);var a=document.createElement(\"div\");a.classList.add(\"column-header\");var o=document.createElement(\"div\");o.classList.add(\"title\",\"edit\"),o.innerHTML=t;var l=document.createElement(\"span\");l.classList.add(\"list-actions\"),l.innerHTML=\"<span>...</span>\";var s=document.createElement(\"div\");s.classList.add(\"list-tasks\");var d=document.createElement(\"button\");return d.classList.add(\"add-task\"),d.innerHTML=\"Добавить задачу\",a.append(o),a.append(l),r.append(a),r.append(s),r.append(d),i.eventAddTask(r),i.editValue(o),e||i.idCounter++,r},editValue:function(e){var t;e.addEventListener(\"dblclick\",(function(){e.setAttribute(\"contenteditable\",!0),e.focus(),t=e.innerHTML})),e.addEventListener(\"blur\",(function(){e.innerHTML.length<1&&e.closest(\".task\")&&e.closest(\".task\").remove(),e.removeAttribute(\"contenteditable\"),t!==e.innerHTML&&i.saveColumn(e)}))},saveColumn:function(e){var t={idParent:e.closest(\".column\").getAttribute(\"data-column-id\"),text:e.innerHTML},n=e.parentElement.getAttribute(\"data-task-id\");n&&(t.id=n),r(\"http://localhost:8000/fixTitleColumn\",t,\"POST\")},eventAddTask:function(e){e.querySelector(\".add-task\").addEventListener(\"click\",(function(){var t=o.findIdTask();e.querySelector(\".list-tasks\").append(o.create(t))})),i.addDragnDropEventColums(e)},addDragnDropEventColums:function(e){e.setAttribute(\"draggable\",!0),e.addEventListener(\"dragstart\",i.evenDragStartColumn),e.addEventListener(\"dragend\",i.evenDragEndColumn),e.addEventListener(\"dragenter\",i.evenDragEnterColumn),e.addEventListener(\"dragover\",i.evenDragOverColumn),e.addEventListener(\"dragleave\",i.evenDragLeaveColumn),e.addEventListener(\"drop\",i.evenDragDropColumn)},evenDragStartColumn:function(){this.classList.add(\"dragElement\"),i.darggbleColumn=this},evenDragEndColumn:function(){this.classList.remove(\"dragElement\"),i.darggbleColumn=null},evenDragEnterColumn:function(e){e.stopPropagation()},evenDragOverColumn:function(e){e.preventDefault(),e.stopPropagation()},evenDragLeaveColumn:function(e){e.stopPropagation()},evenDragDropColumn:function(e){if(e.preventDefault(),e.stopPropagation(),i.darggbleColumn){if(i.darggbleColumn!==this&&i.darggbleColumn)if(this.parentElement===i.darggbleColumn.parentElement){var t=Array.from(this.parentElement.querySelectorAll(\".column\"));t.indexOf(this)<t.indexOf(i.darggbleColumn)?this.parentElement.insertBefore(i.darggbleColumn,this):this.parentElement.insertBefore(i.darggbleColumn,this.nextElementSibling)}else this.parentElement.insertBefore(i.darggbleColumn,this)}else o.darggbleTask&&this.querySelector(\".list-tasks\").append(o.darggbleTask)}},l={basicImage:[\"url(../img/back_1.jpg)\"],changeBack:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t.length<1?l.basicImage:t[Math.floor(Math.random()*t.length)],document.body.style.backgroundImage=e}};n.d(t,\"response\",(function(){return s}));var s={value:\"\"};r(\"/tasks\",\"\",\"GET\"),window.onload=function(){0!=s.value.status.code&&console.log(\"Ошибка\");var e=s.value.content;if(e.length>0){var t=document.querySelector(\".list-column\");e.forEach((function(e){var n=i.create(e.id,e.name),r=n.querySelector(\".list-tasks\");e.tasks.forEach((function(e){var t=o.create(e.id,e.text);r.append(t)})),t.append(n)}))}l.changeBack([\"url(../img/back_1.jpg\",\"url(../img/back_2.jpg\",\"url(../img/back_3.jpg\",\"url(../img/back_4.jpg\"])},document.querySelector(\".add-column\").addEventListener(\"click\",(function(){document.querySelector(\".list-column\").append(i.create())}))}});","extractedComments":[]}